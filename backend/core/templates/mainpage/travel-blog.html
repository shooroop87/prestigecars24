{# backend/core/templates/mainpage/travel-blog.html #}
{% load static %}
{% load i18n %}

{% if latest_posts %}
<section class="layout-pt-xl layout-pb-xl">
  <div data-anim-wrap class="container">
    <div data-anim-child="slide-up" class="row justify-between items-end y-gap-10">
      <div class="col-auto">
        <h2 class="text-30 md:text-24">{% trans "Travel blog and update" %}</h2>
        <p>{% trans "We go beyond empty promises — real places, real experiences, not just another overhyped Instagram stop." %}</p>
      </div>
      <div class="col-auto">
        <a href="{% url 'blog:blog' %}" class="buttonArrow d-flex items-center">
          <span>{% trans "See all" %}</span>
          <i class="icon-arrow-top-right text-16 ml-10"></i>
        </a>
      </div>
    </div>

    <div data-anim-child="slide-up delay-2" class="row y-gap-30 pt-40 sm:pt-20">
      {% for post in latest_posts %}
      <div class="col-lg-4 col-md-6">
        <a href="{{ post.get_absolute_url }}" class="blogCard -type-1">
          <div class="blogCard__image ratio ratio-41:30">
            {% if post.featured_image %}
              <img src="{{ post.featured_image.url }}"
                   alt="{{ post.get_display_title }}"
                   class="img-ratio rounded-12"
                   loading="lazy"
                   onerror="this.src='{% static 'img/blog/default.webp' %}'; this.onerror=null;">
            {% else %}
              <img src="{% static 'img/blog/default.webp' %}"
                   alt="{{ post.get_display_title }}"
                   class="img-ratio rounded-12"
                   loading="lazy">
            {% endif %}

            <div class="blogCard__badge">
              {% if post.category %}
                {{ post.category }} {# __str__ категории должен вернуть локализованное имя #}
              {% else %}
                {% trans "Trips" %}
              {% endif %}
            </div>
          </div>

          <div class="blogCard__content mt-30">
            <div class="blogCard__info text-14">
              <div class="lh-13">{{ post.published_at|date:"F d Y" }}</div>
            </div>
            <h3 class="blogCard__title text-18 fw-500 mt-10">{{ post.get_display_title }}</h3>
          </div>
        </a>
      </div>
      {% endfor %}
    </div>
  </div>
</section>
{% endif %}
