<!-- section-testimonials -->
<div class="section-testimonials tf-spacing-8" id="reviews">
    <div class="tf-container">
        <div class="heading-section mb_48">
            <h3>Отзывы о застройщиках</h3>
        </div>
        
        <div class="swiper" data-preview="2" data-tablet="2" data-mobile="1" data-space-lg="30" data-space-md="20" data-space="15">
            <div class="swiper-wrapper">
                {% for review in reviews %}
                <div class="swiper-slide">
                    <div class="testimonial-item">
                        <div>
                            <ul class="ratings d-flex mb_12">
                                {% for i in "12345" %}
                                <li><i class="icon-favorite_major {% if forloop.counter > review.rating %}text-muted{% endif %}"></i></li>
                                {% endfor %}
                            </ul>
                            <p class="text_primary-color text-body-1 mb_23">"{{ review.text|truncatewords:40 }}"</p>
                        </div>
                        <div class="author d-flex gap_12 align-items-center">
                            <div class="avatar">
    {% if review.user_avatar or review.user_avatar_url %}
    <img src="{{ review.get_avatar }}" width="60" height="60" alt="{{ review.user_name }}">
    {% elif review.developer.logo %}
    <img src="{{ review.developer.logo.url }}" width="60" height="60" alt="{{ review.developer.name }}">
    {% else %}
    <div class="avatar-placeholder">{{ review.user_name|slice:":1" }}</div>
    {% endif %}
</div>
                            <div class="info">
                                <span class="h6 text_primary-color name mb_4">{{ review.user_name }}</span>
                                {% if review.developer %}
                                <p>
                                    <a href="{{ review.developer.get_absolute_url }}" class="link text_secondary-color">
                                        {{ review.developer.name }}
                                    </a>
                                </p>
                                {% endif %}
                                <p class="text-caption-1 text_secondary-color">{{ review.created_at|date:"d.m.Y" }}</p>
                            </div>
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="swiper-slide">
                    <div class="testimonial-item text-center">
                        <p class="text_secondary-color">Отзывы пока не добавлены</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="sw-dots style-1 sw-pagination-layout justify-content-center d-flex mt_24"></div>
        </div>
    </div>
</div>

<style>
.avatar-placeholder {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: #11E226;
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    font-weight: 600;
}
</style>